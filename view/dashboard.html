<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eventi</title>
    <link rel="stylesheet" href="../assets/css/style.css" />
  </head>

  <body>
    <header>
      <img src="../assets/logo.jpg" alt="Edusogno" width="125" height="52" />
    </header>
    <main>
      <h1 class="title">Ciao NOME ecco i tuoi eventi</h1>

      <div class="events-container pt-2">
        <!-- Add Event Card -->
        <div class="event add-event-card" onclick="showAddEventForm()">
          <h3 class="event-plus">+</h3>
          <p class="event-date">Aggiungi evento</p>
        </div>

        <!-- Hidden Add Event Form -->
        <div
          class="event add-event-form"
          id="add-event-form"
          style="display: none"
        >
          <form method="post">
            <div class="event-details">
              <h3 class="event-name">
                <input
                  type="text"
                  name="nome_evento"
                  placeholder="Nome evento"
                  required
                />
              </h3>
              <p class="event-date">
                <input
                  type="text"
                  name="data_evento"
                  placeholder="data evento"
                  required
                />
              </p>
            </div>
            <button class="event-button" type="submit" name="add_event">
              Add Event
            </button>
          </form>
        </div>

        <!-- Event cards will go here.  -->
        <?php foreach ($events as $event) : ?>
        <div class="event">
          <form method="post">
            <div class="event-details">
              <h3 class="event-name">
                <input
                  type="text"
                  name="nome_evento"
                  value="<?php echo $event['nome_evento']; ?>"
                />
              </h3>
              <p class="event-date">
                <input
                  type="text"
                  name="data_evento"
                  value="<?php echo $event['data_evento']; ?>"
                />
              </p>
            </div>
            <input
              type="hidden"
              name="event_id"
              value="<?php echo $event['id']; ?>"
            />
            <button class="event-button">JOIN</button>
            <div class="btn-group">
              <button class="event-button edit" type="submit" name="edit_event">
                Edit
              </button>
              <button
                class="event-button del"
                type="submit"
                name="delete_event"
              ><script>
                function showAddEventForm() {
                    var form = document.getElementById('add-event-form');
                    form.style.display = 'flex';
                }
            </script>
                Delete
              </button>
            </div>
          </form>
        </div>
        <?php endforeach; ?>
      </div>
    </main>
    <!-- <footer></footer> -->
  </body>
</html>

<script>
  function showAddEventForm() {
    var form = document.getElementById("add-event-form");
    form.style.display = "flex";
  }
</script>
